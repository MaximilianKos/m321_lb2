<%- include('../partials/header', { title: 'Meine Bestellungen' }) %>

<h1>Meine Bestellungen</h1>

<% if (!orders || orders.length === 0) { %>
    <p>Sie haben noch keine Bestellungen get√§tigt.</p>
<% } else { %>
    <% orders.forEach(function(order) { %>
        <div style="border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; border-radius: 5px;">
            <div style="display:flex; justify-content: space-between; background-color: #f9f9f9; padding: 10px; margin: -15px -15px 15px -15px; border-bottom: 1px solid #ccc;">
                <strong>Bestellung vom <%= new Date(order.createdAt).toLocaleString() %></strong>
                <span>Status: <%= order.status %></span>
            </div>
            
            <table style="margin-top: 0;">
                <% order.items.forEach(function(item) { %>
                    <tr>
                        <td><%= item.quantity %>x <%= item.name %></td>
                        <td style="text-align: right;"><%= item.price %> CHF</td>
                    </tr>
                <% }); %>
                <tr style="background-color: #eee;">
                    <td><strong>Summe</strong></td>
                    <td style="text-align: right;"><strong><%= order.totalAmount.toFixed(2) %> CHF</strong></td>
                </tr>
            </table>
        </div>
    <% }); %>
<% } %>

<%- include('../partials/footer') %>
